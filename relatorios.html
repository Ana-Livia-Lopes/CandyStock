<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relatórios</title>
    <link rel="stylesheet" href="relatorios.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Rethink+Sans:ital,wght@0,400..800;1,400..800&family=Space+Grotesk:wght@300..700&display=swap"
        rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="menu">
        <div>
            <img src="./img/logo-candy-senfundo.png" alt="logo" class="logo">
            <p>Relatórios</p>
        </div>
        <ul>
            <li><a href="index.html">Inicio</a></li>
            <li><a href="relatorios.html">Relatórios</a></li>
            <li><a href="#">Perfil</a></li>
            <li><a href="login.html"><button>Entrar</button></a></li>
        </ul>
    </div>

    <main>
        <div class="container-cima">
            <div class="box-graficoArea">
                <h2>Histórico de entradas/saídas</h2>
                <canvas id="graficoArea"></canvas>
            </div>
            <div class="dados">
                <h2>Dados do período</h2>
                <div>
                    <p><span style="font-weight: bold;">Total de entradas: </span>365</p>
                    <p><span style="font-weight: bold;">Total de saídas: </span>343</p>
                    <p><span style="font-weight: bold;">Diferença: </span>22</p>
                </div>
                <hr>
                <div>
                    <p><span style="font-weight: bold;">Produto mais vendido: </span>Chocolate</p>
                    <p><span style="font-weight: bold;">Quantidade vendida: </span>150</p>
                    <p><span style="font-weight: bold;">Produto menos vendido: </span>Bolacha</p>
                    <p><span style="font-weight: bold;">Quantidade vendida: </span>71</p>
                    <a href="#rank-entrada"><button>Ver todos</button></a>
                </div>
                <hr>
                <div>
                    <p>O histórico de entradas e saídas é atualizado a cada 7 dias.</p>
                </div>
            </div>
        </div>
        <div class="container-baixo">
            <div class="box-graficoPizza">
                <h2 style="margin-bottom: 3px !important;">Produtos: Saídas</h2>
                <p style="margin-bottom: 20px; color: rgb(141, 141, 141);">Último mês</p>
                <canvas id="graficoPizza"></canvas>
            </div>
            <div class="box-graficoColuna">
                <h2>Críticos</h2>
                <canvas id="graficoColuna"></canvas>
            </div>
        </div>
        <div id="rank-entrada">
            <h2 style="margin-bottom: 3px !important;">Produtos com mais entradas</h2>
            <p style="margin-bottom: 20px; color: rgb(141, 141, 141);">Último mês</p>
            <div class="label-ranking">
                <span>Posição</span>
                <span>Produto</span>
                <span>Entradas</span>
            </div>
            <ul id="rankingEntradas"></ul>
        </div>
    </main>

    <footer>
        <div id="footer">

            <div class="contato">
                <h2>Informações de Contato</h2>
                <p><strong>Candy Stock:</strong></p>
                <p>Endereço: Av. alguma, 90, Caçapava - SP, 12084-090</p>
                <p>Telefone: (12) 9953-1976</p>
                <p>E-mail: candystock@gmail.com</p>

            </div>

            <div class="equipe">
                <h2>Equipe Desenvolvedora</h2>
                <ul>
                    <p>Ana Lívia dos Santos Lopes</p>

                    <p>Gabriel Reis de Brito</p>

                    <p>Isadora Gomes da Silva</p>

                    <p>Lucas Randal Abreu Balderrama</p>
                </ul>
            </div>

        </div>
    </footer>

    <script>
        const ctx = document.getElementById('graficoArea');

        new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['28/09', '5/10', '12/10', '19/10', '26/10', '2/11', '9/11', '16/11'],
                datasets: [
                    {
                        label: 'Entradas',
                        data: [49, 43, 54, 52, 30, 51, 44, 42],
                        fill: true,
                        backgroundColor: 'rgba(81, 100, 224, 0.4)',
                        borderColor: 'rgba(81, 100, 224, 1)',
                        tension: 0.4
                    },
                    {
                        label: 'Saídas',
                        data: [46, 38, 43, 49, 37, 45, 39, 46],
                        fill: true,
                        backgroundColor: 'rgba(255, 25, 25, 0.4)',
                        borderColor: 'rgba(255, 25, 25, 1)',
                        tension: 0.4
                    }
                ]
            },
            options: {
                plugins: {
                    legend: {
                        display: true
                    }
                },
                scales: {
                    y: {
                        ticks: {
                            stepSize: 10
                        },
                        beginAtZero: true
                    }
                }
            }
        });

        const ctxPizza = document.getElementById('graficoPizza');

        new Chart(ctxPizza, {
            type: 'doughnut',
            data: {
                labels: ['Chocolate', 'Bala', 'Pirulito', 'Bolacha', 'Chiclete', 'Bombom'],
                datasets: [{
                    label: 'Produtos',
                    data: [91, 84, 47, 56, 122, 95],
                    backgroundColor: [
                        'rgba(81, 100, 224, 0.7)',
                        'rgba(255, 25, 25, 0.7)',
                        'rgba(48, 207, 77, 0.7)',
                        'rgba(147, 81, 224, 0.7)',
                        'rgba(255, 206, 86, 0.7)',
                        'rgba(255, 99, 132, 0.7)'
                    ],
                    borderColor: [
                        'rgba(81, 100, 224, 1)',
                        'rgba(255, 25, 25, 1)',
                        'rgba(48, 207, 77, 1)',
                        'rgba(147, 81, 224, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(255, 99, 132, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            boxWidth: 15,
                            padding: 15
                        }
                    }
                }
            }
        });


        const ctxColuna = document.getElementById('graficoColuna');

        new Chart(ctxColuna, {
            type: 'bar',
            data: {
                labels: ['Chocolate', 'Bala', 'Pirulito', 'Bolacha', 'Chiclete', 'Bombom'],
                datasets: [{
                    label: 'Estoque atual',
                    data: [52, 106, 89, 94, 112, 61],
                    backgroundColor: 'rgba(48, 207, 77, 0.6)',
                    borderColor: 'rgba(48, 207, 77, 1)',
                    borderWidth: 1,
                    borderRadius: 1
                }]
            },
            options: {
                plugins: {
                    legend: { display: false },
                    title: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: { stepSize: 20 }
                    }
                }
            },
            plugins: [{
                id: 'linhaCritica',
                afterDraw: (chart) => {
                    const { ctx, chartArea: { left, right }, scales: { y } } = chart;
                    const yPos = y.getPixelForValue(80);

                    ctx.save();
                    ctx.beginPath();
                    ctx.moveTo(left, yPos);
                    ctx.lineTo(right, yPos);
                    ctx.lineWidth = 2;
                    ctx.strokeStyle = 'rgba(255, 54, 54, 0.8)';
                    ctx.setLineDash([6, 6]);
                    ctx.stroke();
                    ctx.restore();
                }
            }]
        });

        const rankingEntradas = [
            { nome: 'Chiclete', entradas: 72 },
            { nome: 'Bombom', entradas: 114 },
            { nome: 'Chocolate', entradas: 91 },
            { nome: 'Bala', entradas: 67 },
            { nome: 'Bolacha', entradas: 86 },
            { nome: 'Pirulito', entradas: 64 }
        ];

        rankingEntradas.sort((a, b) => b.entradas - a.entradas);

        const ul = document.getElementById('rankingEntradas');
        rankingEntradas.forEach((produto, index) => {
            const li = document.createElement('li');
            li.innerHTML = `
        <span>${index + 1}º</span> ${produto.nome}
        <span>${produto.entradas}</span>
    `;
            ul.appendChild(li);
        });

    </script>
</body>

</html>